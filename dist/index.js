"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("reflect-metadata");
const typeorm_1 = require("typeorm");
const Student_1 = require("./entities/Student");
var Student_2 = require("./entities/Student");
exports.Student = Student_2.Student;
const StudentRepository_1 = require("./StudentRepository");
var StudentRepository_2 = require("./StudentRepository");
exports.StudentRepository = StudentRepository_2.StudentRepository;
const OfferedClassRepository_1 = require("./OfferedClassRepository");
var OfferedClassRepository_2 = require("./OfferedClassRepository");
exports.OfferedClassRepository = OfferedClassRepository_2.OfferedClassRepository;
const OfferedClass_1 = require("./entities/OfferedClass");
var OfferedClass_2 = require("./entities/OfferedClass");
exports.OfferedClass = OfferedClass_2.OfferedClass;
var _connection;
async function connect(databaseFN) {
    _connection = await typeorm_1.createConnection({
        type: "sqlite",
        database: databaseFN,
        synchronize: true,
        logging: false,
        entities: [Student_1.Student, OfferedClass_1.OfferedClass]
    });
}
exports.connect = connect;
function connected() {
    return typeof _connection !== "undefined";
}
exports.connected = connected;
function getStudentRepository() {
    return _connection.getCustomRepository(StudentRepository_1.StudentRepository);
}
exports.getStudentRepository = getStudentRepository;
function getOfferedClassRepository() {
    return _connection.getCustomRepository(OfferedClassRepository_1.OfferedClassRepository);
}
exports.getOfferedClassRepository = getOfferedClassRepository;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9saWIvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw0QkFBMEI7QUFDMUIscUNBQXVEO0FBQ3ZELGdEQUE2QztBQUM3Qyw4Q0FBNkM7QUFBcEMsNEJBQUEsT0FBTyxDQUFBO0FBQ2hCLDJEQUF3RDtBQUN4RCx5REFBd0Q7QUFBL0MsZ0RBQUEsaUJBQWlCLENBQUE7QUFDMUIscUVBQWtFO0FBQ2xFLG1FQUFrRTtBQUF6RCwwREFBQSxzQkFBc0IsQ0FBQTtBQUMvQiwwREFBdUQ7QUFDdkQsd0RBQXVEO0FBQTlDLHNDQUFBLFlBQVksQ0FBQTtBQUVyQixJQUFJLFdBQXVCLENBQUM7QUFFckIsS0FBSyxVQUFVLE9BQU8sQ0FBQyxVQUFrQjtJQUM5QyxXQUFXLEdBQUcsTUFBTSwwQkFBZ0IsQ0FBQztRQUNuQyxJQUFJLEVBQUUsUUFBUTtRQUNkLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLFdBQVcsRUFBRSxJQUFJO1FBQ2pCLE9BQU8sRUFBRSxLQUFLO1FBQ2QsUUFBUSxFQUFFLENBQUMsaUJBQU8sRUFBRSwyQkFBWSxDQUFDO0tBQ2xDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFSRCwwQkFRQztBQUVELFNBQWdCLFNBQVM7SUFDdkIsT0FBTyxPQUFPLFdBQVcsS0FBSyxXQUFXLENBQUM7QUFDNUMsQ0FBQztBQUZELDhCQUVDO0FBRUQsU0FBZ0Isb0JBQW9CO0lBQ2xDLE9BQU8sV0FBVyxDQUFDLG1CQUFtQixDQUFDLHFDQUFpQixDQUFDLENBQUM7QUFDNUQsQ0FBQztBQUZELG9EQUVDO0FBRUQsU0FBZ0IseUJBQXlCO0lBQ3ZDLE9BQU8sV0FBVyxDQUFDLG1CQUFtQixDQUFDLCtDQUFzQixDQUFDLENBQUM7QUFDakUsQ0FBQztBQUZELDhEQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwicmVmbGVjdC1tZXRhZGF0YVwiO1xuaW1wb3J0IHsgY3JlYXRlQ29ubmVjdGlvbiwgQ29ubmVjdGlvbiB9IGZyb20gXCJ0eXBlb3JtXCI7XG5pbXBvcnQgeyBTdHVkZW50IH0gZnJvbSBcIi4vZW50aXRpZXMvU3R1ZGVudFwiO1xuZXhwb3J0IHsgU3R1ZGVudCB9IGZyb20gXCIuL2VudGl0aWVzL1N0dWRlbnRcIjtcbmltcG9ydCB7IFN0dWRlbnRSZXBvc2l0b3J5IH0gZnJvbSBcIi4vU3R1ZGVudFJlcG9zaXRvcnlcIjtcbmV4cG9ydCB7IFN0dWRlbnRSZXBvc2l0b3J5IH0gZnJvbSBcIi4vU3R1ZGVudFJlcG9zaXRvcnlcIjtcbmltcG9ydCB7IE9mZmVyZWRDbGFzc1JlcG9zaXRvcnkgfSBmcm9tIFwiLi9PZmZlcmVkQ2xhc3NSZXBvc2l0b3J5XCI7XG5leHBvcnQgeyBPZmZlcmVkQ2xhc3NSZXBvc2l0b3J5IH0gZnJvbSBcIi4vT2ZmZXJlZENsYXNzUmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgT2ZmZXJlZENsYXNzIH0gZnJvbSBcIi4vZW50aXRpZXMvT2ZmZXJlZENsYXNzXCI7XG5leHBvcnQgeyBPZmZlcmVkQ2xhc3MgfSBmcm9tIFwiLi9lbnRpdGllcy9PZmZlcmVkQ2xhc3NcIjtcblxudmFyIF9jb25uZWN0aW9uOiBDb25uZWN0aW9uO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdChkYXRhYmFzZUZOOiBzdHJpbmcpIHtcbiAgX2Nvbm5lY3Rpb24gPSBhd2FpdCBjcmVhdGVDb25uZWN0aW9uKHtcbiAgICB0eXBlOiBcInNxbGl0ZVwiLFxuICAgIGRhdGFiYXNlOiBkYXRhYmFzZUZOLFxuICAgIHN5bmNocm9uaXplOiB0cnVlLFxuICAgIGxvZ2dpbmc6IGZhbHNlLFxuICAgIGVudGl0aWVzOiBbU3R1ZGVudCwgT2ZmZXJlZENsYXNzXVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbm5lY3RlZCgpIHtcbiAgcmV0dXJuIHR5cGVvZiBfY29ubmVjdGlvbiAhPT0gXCJ1bmRlZmluZWRcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0dWRlbnRSZXBvc2l0b3J5KCk6IFN0dWRlbnRSZXBvc2l0b3J5IHtcbiAgcmV0dXJuIF9jb25uZWN0aW9uLmdldEN1c3RvbVJlcG9zaXRvcnkoU3R1ZGVudFJlcG9zaXRvcnkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T2ZmZXJlZENsYXNzUmVwb3NpdG9yeSgpOiBPZmZlcmVkQ2xhc3NSZXBvc2l0b3J5IHtcbiAgcmV0dXJuIF9jb25uZWN0aW9uLmdldEN1c3RvbVJlcG9zaXRvcnkoT2ZmZXJlZENsYXNzUmVwb3NpdG9yeSk7XG59XG4iXX0=